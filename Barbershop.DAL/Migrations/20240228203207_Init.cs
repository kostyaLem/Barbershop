using Microsoft.EntityFrameworkCore.Migrations;
using Npgsql.EntityFrameworkCore.PostgreSQL.Metadata;

#nullable disable

namespace Barbershop.DAL.Migrations;

/// <inheritdoc />
public partial class Init : Migration
{
    /// <inheritdoc />
    protected override void Up(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.CreateTable(
            name: "Admin",
            columns: table => new
            {
                Id = table.Column<int>(type: "integer", nullable: false)
                    .Annotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                PasswordHash = table.Column<string>(type: "text", nullable: false),
                UpdatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                LastName = table.Column<string>(type: "text", nullable: true),
                FirstName = table.Column<string>(type: "text", nullable: false),
                Surname = table.Column<string>(type: "text", nullable: true),
                Email = table.Column<string>(type: "text", nullable: true),
                PhoneNumber = table.Column<string>(type: "text", nullable: true),
                Photo = table.Column<byte[]>(type: "bytea", nullable: true)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_Admin", x => x.Id);
            });

        migrationBuilder.CreateTable(
            name: "Barber",
            columns: table => new
            {
                Id = table.Column<int>(type: "integer", nullable: false)
                    .Annotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                PasswordHash = table.Column<string>(type: "text", nullable: false),
                SkillLevel = table.Column<string>(type: "text", nullable: false),
                UpdatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                LastName = table.Column<string>(type: "text", nullable: true),
                FirstName = table.Column<string>(type: "text", nullable: false),
                Surname = table.Column<string>(type: "text", nullable: true),
                Email = table.Column<string>(type: "text", nullable: true),
                PhoneNumber = table.Column<string>(type: "text", nullable: true),
                Photo = table.Column<byte[]>(type: "bytea", nullable: true)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_Barber", x => x.Id);
            });

        migrationBuilder.CreateTable(
            name: "BarbershopParameterRows",
            columns: table => new
            {
                Id = table.Column<int>(type: "integer", nullable: false)
                    .Annotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                WorkDayStartsOn = table.Column<int>(type: "integer", nullable: false),
                WorkDayEndsOn = table.Column<int>(type: "integer", nullable: false),
                PercentFromProductSelling = table.Column<int>(type: "integer", nullable: false),
                JuniorServiceSalePercent = table.Column<int>(type: "integer", nullable: false),
                MiddleServiceSalePercent = table.Column<int>(type: "integer", nullable: false),
                SeniorServiceSalePercent = table.Column<int>(type: "integer", nullable: false),
                UpdatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_BarbershopParameterRows", x => x.Id);
            });

        migrationBuilder.CreateTable(
            name: "Client",
            columns: table => new
            {
                Id = table.Column<int>(type: "integer", nullable: false)
                    .Annotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                Notes = table.Column<string>(type: "text", nullable: false),
                UpdatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                LastName = table.Column<string>(type: "text", nullable: true),
                FirstName = table.Column<string>(type: "text", nullable: false),
                Surname = table.Column<string>(type: "text", nullable: true),
                Email = table.Column<string>(type: "text", nullable: true),
                PhoneNumber = table.Column<string>(type: "text", nullable: true),
                Photo = table.Column<byte[]>(type: "bytea", nullable: true)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_Client", x => x.Id);
            });

        migrationBuilder.CreateTable(
            name: "Product",
            columns: table => new
            {
                Id = table.Column<int>(type: "integer", nullable: false)
                    .Annotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                Name = table.Column<string>(type: "text", nullable: false),
                Cost = table.Column<decimal>(type: "numeric", nullable: false),
                UpdatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_Product", x => x.Id);
            });

        migrationBuilder.CreateTable(
            name: "Service",
            columns: table => new
            {
                Id = table.Column<int>(type: "integer", nullable: false)
                    .Annotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                Name = table.Column<string>(type: "text", nullable: false),
                UpdatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_Service", x => x.Id);
            });

        migrationBuilder.CreateTable(
            name: "Order",
            columns: table => new
            {
                Id = table.Column<int>(type: "integer", nullable: false)
                    .Annotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                OrderStatus = table.Column<string>(type: "text", nullable: false),
                CreatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false),
                CompletedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: true),
                BarbersGain = table.Column<int>(type: "integer", nullable: false),
                BarberId = table.Column<int>(type: "integer", nullable: true),
                ClientId = table.Column<int>(type: "integer", nullable: false),
                UpdatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_Order", x => x.Id);
                table.ForeignKey(
                    name: "FK_Order_Barber_BarberId",
                    column: x => x.BarberId,
                    principalTable: "Barber",
                    principalColumn: "Id");
                table.ForeignKey(
                    name: "FK_Order_Client_ClientId",
                    column: x => x.ClientId,
                    principalTable: "Client",
                    principalColumn: "Id");
            });

        migrationBuilder.CreateTable(
            name: "ServiceSkillLevel",
            columns: table => new
            {
                Id = table.Column<int>(type: "integer", nullable: false)
                    .Annotation("Npgsql:ValueGenerationStrategy", NpgsqlValueGenerationStrategy.IdentityByDefaultColumn),
                SkillLevel = table.Column<string>(type: "text", nullable: false),
                Cost = table.Column<decimal>(type: "numeric", nullable: false),
                MinutesDuration = table.Column<int>(type: "integer", nullable: false),
                ServiceId = table.Column<int>(type: "integer", nullable: false),
                UpdatedOn = table.Column<DateTime>(type: "timestamp with time zone", nullable: false)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_ServiceSkillLevel", x => x.Id);
                table.ForeignKey(
                    name: "FK_ServiceSkillLevel_Service_ServiceId",
                    column: x => x.ServiceId,
                    principalTable: "Service",
                    principalColumn: "Id");
            });

        migrationBuilder.CreateTable(
            name: "OrderProduct",
            columns: table => new
            {
                OrdersId = table.Column<int>(type: "integer", nullable: false),
                ProductsId = table.Column<int>(type: "integer", nullable: false)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_OrderProduct", x => new { x.OrdersId, x.ProductsId });
                table.ForeignKey(
                    name: "FK_OrderProduct_Order_OrdersId",
                    column: x => x.OrdersId,
                    principalTable: "Order",
                    principalColumn: "Id",
                    onDelete: ReferentialAction.Cascade);
                table.ForeignKey(
                    name: "FK_OrderProduct_Product_ProductsId",
                    column: x => x.ProductsId,
                    principalTable: "Product",
                    principalColumn: "Id",
                    onDelete: ReferentialAction.Cascade);
            });

        migrationBuilder.CreateTable(
            name: "OrderServiceSkillLevel",
            columns: table => new
            {
                OrdersId = table.Column<int>(type: "integer", nullable: false),
                ServiceSkillLevelsId = table.Column<int>(type: "integer", nullable: false)
            },
            constraints: table =>
            {
                table.PrimaryKey("PK_OrderServiceSkillLevel", x => new { x.OrdersId, x.ServiceSkillLevelsId });
                table.ForeignKey(
                    name: "FK_OrderServiceSkillLevel_Order_OrdersId",
                    column: x => x.OrdersId,
                    principalTable: "Order",
                    principalColumn: "Id",
                    onDelete: ReferentialAction.Cascade);
                table.ForeignKey(
                    name: "FK_OrderServiceSkillLevel_ServiceSkillLevel_ServiceSkillLevels~",
                    column: x => x.ServiceSkillLevelsId,
                    principalTable: "ServiceSkillLevel",
                    principalColumn: "Id",
                    onDelete: ReferentialAction.Cascade);
            });

        migrationBuilder.CreateIndex(
            name: "IX_Order_BarberId",
            table: "Order",
            column: "BarberId");

        migrationBuilder.CreateIndex(
            name: "IX_Order_ClientId",
            table: "Order",
            column: "ClientId");

        migrationBuilder.CreateIndex(
            name: "IX_OrderProduct_ProductsId",
            table: "OrderProduct",
            column: "ProductsId");

        migrationBuilder.CreateIndex(
            name: "IX_OrderServiceSkillLevel_ServiceSkillLevelsId",
            table: "OrderServiceSkillLevel",
            column: "ServiceSkillLevelsId");

        migrationBuilder.CreateIndex(
            name: "IX_ServiceSkillLevel_ServiceId",
            table: "ServiceSkillLevel",
            column: "ServiceId");
    }

    /// <inheritdoc />
    protected override void Down(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.DropTable(
            name: "Admin");

        migrationBuilder.DropTable(
            name: "BarbershopParameterRows");

        migrationBuilder.DropTable(
            name: "OrderProduct");

        migrationBuilder.DropTable(
            name: "OrderServiceSkillLevel");

        migrationBuilder.DropTable(
            name: "Product");

        migrationBuilder.DropTable(
            name: "Order");

        migrationBuilder.DropTable(
            name: "ServiceSkillLevel");

        migrationBuilder.DropTable(
            name: "Barber");

        migrationBuilder.DropTable(
            name: "Client");

        migrationBuilder.DropTable(
            name: "Service");
    }
}
